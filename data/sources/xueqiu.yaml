source_name: xueqiu
site_type: news
target_url: https://xueqiu.com/
requires_login: false
login_credentials:
  username: ''
  password: ''
crawl_depth: 1

# 回到原来的工作配置，但优化关键词过滤策略
entry_pattern: '.style_home__timeline_1Tz'

# 启用入口页直接抽取内容，避免跳转到详情页
use_entry_content: true

# 由于使用 use_entry_content: true，直接从入口页面提取内容
# detail_pattern 在此模式下需要提供空字符串或空列表
detail_pattern:
  title: ""
  published_at: ""
  content: ""
  original_url: ""

# 恢复关键词过滤，只抓取包含时间戳的7x24实时资讯
keywords_filter: [":"]
output_format: txt
schedule:
  type: cron
  value: "0 8 * * *"
time_range:
  relative: "last_24_hours"

# 增强反检测策略，添加入口页交互配置
anti_scraping_strategies:
  delay_range: [3.0, 8.0]
  retry_on_fail: 4
  use_headless_browser: true
  # 增强反检测策略
  use_stealth_js: true
  randomize_viewport: true
  # 增加浏览器超时设置，避免页面关闭错误
  page_timeout: 60000                           # 页面超时60秒
  navigation_timeout: 45000                     # 导航超时45秒
  # 启用无头模式，避免浏览器窗口打开
  headless_mode: true                           # 启用无头模式

# 添加入口页交互配置，确保7x24内容加载并支持滚动获取更多内容
entry_interactions:
  # 首先点击7X24标签（与测试脚本策略一致）
  click_more_selector: 'text=7X24'              # 首先点击7X24标签
  click_more_times: 1                           # 点击1次7X24标签
  click_wait_selector: '.style_home__timeline_1Tz'  # 点击后等待时间线容器加载
  
  # 等待时间线容器完全加载
  wait_selector: '.style_home__timeline_1Tz'    # 等待时间线容器出现
  wait_timeout: 15                              # 等待超时15秒，与测试脚本一致
  
  # 启用自动交互模式，实现滚动过程中动态点击"更多"按钮
  auto: true                                    # 启用自动交互模式
  auto_max_rounds: 100                          # 大幅增加到100轮，突破限制
  auto_stall_rounds: 15                         # 增加到15轮，更有耐心等待
  prefer_scroll_first: true                     # 每轮优先滚动，然后尝试点击
  
  # 滚动和点击配置
  scroll_rounds: 5                              # 增加到5次，更激进的滚动
  scroll_pause_ms: 1500                         # 减少到1.5秒，加快节奏
# 详情页交互配置（当前未启用，因 use_entry_content: true）
detail_interactions:
  wait_selector: null          # 无需等待特定元素
  wait_timeout: 10             # 默认等待超时 10 秒
  scroll_rounds: 0             # 不滚动
  scroll_pause_ms: 1000          # 滚动后暂停 1 秒（未使用）
  click_more_selector: null    # 不点击“更多”按钮
  click_more_times: 0          # 点击次数为 0
  click_wait_selector: null    # 点击后无需等待
  auto: false                  # 关闭自动交互
  auto_max_rounds: 0           # 自动交互最大轮数为 0
  auto_stall_rounds: 0         # 连续无新内容轮数上限为 0
  prefer_scroll_first: false   # 不优先滚动

# 分页配置（当前关闭）
pagination:
  enabled: false               # 禁用分页
  next_page_selector: null       # 无“下一页”选择器
  max_pages: 1                 # 最大页数为 1（即不翻页）
  page_wait_timeout: 10        # 翻页后等待 10 秒（未使用）

# 导出设置
export_settings:
  enabled: true                # 启用导出
  format: txt                  # 导出格式为 txt
  output_dir: data/outputs     # 输出目录
  filename_template: "{source_name}-{timestamp}.{format}"  # 文件名模板
  include_metadata: true       # 包含元数据
